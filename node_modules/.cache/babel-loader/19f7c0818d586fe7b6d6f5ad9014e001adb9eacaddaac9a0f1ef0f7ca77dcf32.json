{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Undo,RotateCcw,CheckCircle}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UndoManager=/*#__PURE__*/React.forwardRef((_ref,ref)=>{let{formData,onUndo,onClearHistory}=_ref;const[appliedSuggestions,setAppliedSuggestions]=useState([]);const[isExpanded,setIsExpanded]=useState(false);useEffect(()=>{// Load applied suggestions from localStorage\nconst saved=localStorage.getItem('lambdaforge-applied-suggestions');if(saved){try{setAppliedSuggestions(JSON.parse(saved));}catch(error){console.error('Failed to load undo history:',error);}}},[]);useEffect(()=>{// Save applied suggestions to localStorage\nlocalStorage.setItem('lambdaforge-applied-suggestions',JSON.stringify(appliedSuggestions));},[appliedSuggestions]);const addAppliedSuggestion=(suggestion,previousFormData)=>{const appliedSuggestion={id:\"applied-\".concat(Date.now()),suggestion,previousFormData,appliedAt:new Date().toISOString(),timestamp:Date.now()};setAppliedSuggestions(prev=>[appliedSuggestion,...prev.slice(0,9)]);// Keep last 10\n};const undoSuggestion=appliedSuggestion=>{// Revert to previous form data\nonUndo(appliedSuggestion.previousFormData);// Remove from applied suggestions\nsetAppliedSuggestions(prev=>prev.filter(item=>item.id!==appliedSuggestion.id));};const clearAllHistory=()=>{setAppliedSuggestions([]);onClearHistory();};const formatTimeAgo=timestamp=>{const now=Date.now();const diff=now-timestamp;const minutes=Math.floor(diff/60000);const hours=Math.floor(diff/3600000);if(minutes<1)return'Just now';if(minutes<60)return\"\".concat(minutes,\"m ago\");if(hours<24)return\"\".concat(hours,\"h ago\");return new Date(timestamp).toLocaleDateString();};// Expose methods to parent component\nReact.useImperativeHandle(ref,()=>({addAppliedSuggestion}));if(appliedSuggestions.length===0){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-aws-gray-200 rounded-lg p-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(Undo,{className:\"w-5 h-5 text-aws-orange\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-aws-blue\",children:\"Applied Suggestions\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-aws-gray-100 text-aws-gray-600 text-xs font-medium rounded\",children:appliedSuggestions.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsExpanded(!isExpanded),className:\"px-3 py-1 text-sm text-aws-gray-600 hover:text-aws-blue transition-colors duration-200\",children:[isExpanded?'Hide':'Show',\" History\"]}),appliedSuggestions.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:clearAllHistory,className:\"px-3 py-1 text-sm text-red-600 hover:text-red-800 transition-colors duration-200\",children:\"Clear All\"})]})]}),isExpanded&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 space-y-3 max-h-64 overflow-y-auto\",children:appliedSuggestions.map(appliedSuggestion=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-aws-gray-50 border border-aws-gray-200 rounded-lg hover:shadow-sm transition-shadow duration-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:appliedSuggestion.suggestion.icon}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-aws-blue text-sm\",children:appliedSuggestion.suggestion.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-aws-gray-600\",children:[\"Applied \",formatTimeAgo(appliedSuggestion.timestamp),\" \\u2022\",/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 capitalize\",children:appliedSuggestion.suggestion.type})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4 text-green-500\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>undoSuggestion(appliedSuggestion),className:\"flex items-center space-x-1 px-2 py-1 text-xs text-aws-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-all duration-200\",title:\"Undo this suggestion\",children:[/*#__PURE__*/_jsx(RotateCcw,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Undo\"})]})]})]},appliedSuggestion.id))}),!isExpanded&&appliedSuggestions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex items-center justify-between text-sm text-aws-gray-600\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Last applied: \",appliedSuggestions[0].suggestion.title]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>undoSuggestion(appliedSuggestions[0]),className:\"flex items-center space-x-1 px-2 py-1 text-xs hover:text-red-600 hover:bg-red-50 rounded transition-all duration-200\",children:[/*#__PURE__*/_jsx(RotateCcw,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Undo Last\"})]})]})]});});export default UndoManager;","map":{"version":3,"names":["React","useState","useEffect","Undo","RotateCcw","CheckCircle","jsx","_jsx","jsxs","_jsxs","UndoManager","forwardRef","_ref","ref","formData","onUndo","onClearHistory","appliedSuggestions","setAppliedSuggestions","isExpanded","setIsExpanded","saved","localStorage","getItem","JSON","parse","error","console","setItem","stringify","addAppliedSuggestion","suggestion","previousFormData","appliedSuggestion","id","concat","Date","now","appliedAt","toISOString","timestamp","prev","slice","undoSuggestion","filter","item","clearAllHistory","formatTimeAgo","diff","minutes","Math","floor","hours","toLocaleDateString","useImperativeHandle","length","className","children","onClick","map","icon","title","type"],"sources":["/Users/codinggents/Documents/lambdaforge/src/components/UndoManager.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Undo, RotateCcw, CheckCircle } from 'lucide-react';\n\nconst UndoManager = React.forwardRef(({ formData, onUndo, onClearHistory }, ref) => {\n  const [appliedSuggestions, setAppliedSuggestions] = useState([]);\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  useEffect(() => {\n    // Load applied suggestions from localStorage\n    const saved = localStorage.getItem('lambdaforge-applied-suggestions');\n    if (saved) {\n      try {\n        setAppliedSuggestions(JSON.parse(saved));\n      } catch (error) {\n        console.error('Failed to load undo history:', error);\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    // Save applied suggestions to localStorage\n    localStorage.setItem('lambdaforge-applied-suggestions', JSON.stringify(appliedSuggestions));\n  }, [appliedSuggestions]);\n\n  const addAppliedSuggestion = (suggestion, previousFormData) => {\n    const appliedSuggestion = {\n      id: `applied-${Date.now()}`,\n      suggestion,\n      previousFormData,\n      appliedAt: new Date().toISOString(),\n      timestamp: Date.now()\n    };\n    \n    setAppliedSuggestions(prev => [appliedSuggestion, ...prev.slice(0, 9)]); // Keep last 10\n  };\n\n  const undoSuggestion = (appliedSuggestion) => {\n    // Revert to previous form data\n    onUndo(appliedSuggestion.previousFormData);\n    \n    // Remove from applied suggestions\n    setAppliedSuggestions(prev => \n      prev.filter(item => item.id !== appliedSuggestion.id)\n    );\n  };\n\n  const clearAllHistory = () => {\n    setAppliedSuggestions([]);\n    onClearHistory();\n  };\n\n  const formatTimeAgo = (timestamp) => {\n    const now = Date.now();\n    const diff = now - timestamp;\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    \n    if (minutes < 1) return 'Just now';\n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n    return new Date(timestamp).toLocaleDateString();\n  };\n\n  // Expose methods to parent component\n  React.useImperativeHandle(ref, () => ({\n    addAppliedSuggestion\n  }));\n\n  if (appliedSuggestions.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white border border-aws-gray-200 rounded-lg p-4 mb-6\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-3\">\n          <Undo className=\"w-5 h-5 text-aws-orange\" />\n          <h3 className=\"text-lg font-semibold text-aws-blue\">Applied Suggestions</h3>\n          <span className=\"px-2 py-1 bg-aws-gray-100 text-aws-gray-600 text-xs font-medium rounded\">\n            {appliedSuggestions.length}\n          </span>\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          <button\n            onClick={() => setIsExpanded(!isExpanded)}\n            className=\"px-3 py-1 text-sm text-aws-gray-600 hover:text-aws-blue transition-colors duration-200\"\n          >\n            {isExpanded ? 'Hide' : 'Show'} History\n          </button>\n          \n          {appliedSuggestions.length > 0 && (\n            <button\n              onClick={clearAllHistory}\n              className=\"px-3 py-1 text-sm text-red-600 hover:text-red-800 transition-colors duration-200\"\n            >\n              Clear All\n            </button>\n          )}\n        </div>\n      </div>\n\n      {isExpanded && (\n        <div className=\"mt-4 space-y-3 max-h-64 overflow-y-auto\">\n          {appliedSuggestions.map((appliedSuggestion) => (\n            <div \n              key={appliedSuggestion.id}\n              className=\"flex items-center justify-between p-3 bg-aws-gray-50 border border-aws-gray-200 rounded-lg hover:shadow-sm transition-shadow duration-200\"\n            >\n              <div className=\"flex items-center space-x-3\">\n                <span className=\"text-lg\">{appliedSuggestion.suggestion.icon}</span>\n                <div className=\"flex-1\">\n                  <h4 className=\"font-medium text-aws-blue text-sm\">\n                    {appliedSuggestion.suggestion.title}\n                  </h4>\n                  <p className=\"text-xs text-aws-gray-600\">\n                    Applied {formatTimeAgo(appliedSuggestion.timestamp)} • \n                    <span className=\"ml-1 capitalize\">{appliedSuggestion.suggestion.type}</span>\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center space-x-2\">\n                <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                <button\n                  onClick={() => undoSuggestion(appliedSuggestion)}\n                  className=\"flex items-center space-x-1 px-2 py-1 text-xs text-aws-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-all duration-200\"\n                  title=\"Undo this suggestion\"\n                >\n                  <RotateCcw className=\"w-3 h-3\" />\n                  <span>Undo</span>\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {!isExpanded && appliedSuggestions.length > 0 && (\n        <div className=\"mt-3 flex items-center justify-between text-sm text-aws-gray-600\">\n          <span>\n            Last applied: {appliedSuggestions[0].suggestion.title}\n          </span>\n          <button\n            onClick={() => undoSuggestion(appliedSuggestions[0])}\n            className=\"flex items-center space-x-1 px-2 py-1 text-xs hover:text-red-600 hover:bg-red-50 rounded transition-all duration-200\"\n          >\n            <RotateCcw className=\"w-3 h-3\" />\n            <span>Undo Last</span>\n          </button>\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport default UndoManager; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from \"/Users/codinggents/Documents/lambdaforge/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { getUserAgentPrefix } from \"@aws-sdk/util-endpoints\";\nimport { HttpRequest } from \"@smithy/protocol-http\";\nimport { checkFeatures } from \"./check-features\";\nimport { SPACE, UA_ESCAPE_CHAR, UA_NAME_ESCAPE_REGEX, UA_NAME_SEPARATOR, UA_VALUE_ESCAPE_REGEX, USER_AGENT, X_AMZ_USER_AGENT } from \"./constants\";\nimport { encodeFeatures } from \"./encode-features\";\nexport const userAgentMiddleware = options => (next, context) => async args => {\n  var _context$userAgent, _context$__smithy_con, _awsContext$__aws_sdk, _options$customUserAg;\n  const {\n    request\n  } = args;\n  if (!HttpRequest.isInstance(request)) {\n    return next(args);\n  }\n  const {\n    headers\n  } = request;\n  const userAgent = (context === null || context === void 0 || (_context$userAgent = context.userAgent) === null || _context$userAgent === void 0 ? void 0 : _context$userAgent.map(escapeUserAgent)) || [];\n  const defaultUserAgent = (await options.defaultUserAgentProvider()).map(escapeUserAgent);\n  await checkFeatures(context, options, args);\n  const awsContext = context;\n  defaultUserAgent.push(\"m/\".concat(encodeFeatures(Object.assign({}, (_context$__smithy_con = context.__smithy_context) === null || _context$__smithy_con === void 0 ? void 0 : _context$__smithy_con.features, (_awsContext$__aws_sdk = awsContext.__aws_sdk_context) === null || _awsContext$__aws_sdk === void 0 ? void 0 : _awsContext$__aws_sdk.features))));\n  const customUserAgent = (options === null || options === void 0 || (_options$customUserAg = options.customUserAgent) === null || _options$customUserAg === void 0 ? void 0 : _options$customUserAg.map(escapeUserAgent)) || [];\n  const appId = await options.userAgentAppId();\n  if (appId) {\n    defaultUserAgent.push(escapeUserAgent([\"app/\".concat(appId)]));\n  }\n  const prefix = getUserAgentPrefix();\n  const sdkUserAgentValue = (prefix ? [prefix] : []).concat([...defaultUserAgent, ...userAgent, ...customUserAgent]).join(SPACE);\n  const normalUAValue = [...defaultUserAgent.filter(section => section.startsWith(\"aws-sdk-\")), ...customUserAgent].join(SPACE);\n  if (options.runtime !== \"browser\") {\n    if (normalUAValue) {\n      headers[X_AMZ_USER_AGENT] = headers[X_AMZ_USER_AGENT] ? \"\".concat(headers[USER_AGENT], \" \").concat(normalUAValue) : normalUAValue;\n    }\n    headers[USER_AGENT] = sdkUserAgentValue;\n  } else {\n    headers[X_AMZ_USER_AGENT] = sdkUserAgentValue;\n  }\n  return next(_objectSpread(_objectSpread({}, args), {}, {\n    request\n  }));\n};\nconst escapeUserAgent = userAgentPair => {\n  var _userAgentPair$;\n  const name = userAgentPair[0].split(UA_NAME_SEPARATOR).map(part => part.replace(UA_NAME_ESCAPE_REGEX, UA_ESCAPE_CHAR)).join(UA_NAME_SEPARATOR);\n  const version = (_userAgentPair$ = userAgentPair[1]) === null || _userAgentPair$ === void 0 ? void 0 : _userAgentPair$.replace(UA_VALUE_ESCAPE_REGEX, UA_ESCAPE_CHAR);\n  const prefixSeparatorIndex = name.indexOf(UA_NAME_SEPARATOR);\n  const prefix = name.substring(0, prefixSeparatorIndex);\n  let uaName = name.substring(prefixSeparatorIndex + 1);\n  if (prefix === \"api\") {\n    uaName = uaName.toLowerCase();\n  }\n  return [prefix, uaName, version].filter(item => item && item.length > 0).reduce((acc, item, index) => {\n    switch (index) {\n      case 0:\n        return item;\n      case 1:\n        return \"\".concat(acc, \"/\").concat(item);\n      default:\n        return \"\".concat(acc, \"#\").concat(item);\n    }\n  }, \"\");\n};\nexport const getUserAgentMiddlewareOptions = {\n  name: \"getUserAgentMiddleware\",\n  step: \"build\",\n  priority: \"low\",\n  tags: [\"SET_USER_AGENT\", \"USER_AGENT\"],\n  override: true\n};\nexport const getUserAgentPlugin = config => ({\n  applyToStack: clientStack => {\n    clientStack.add(userAgentMiddleware(config), getUserAgentMiddlewareOptions);\n  }\n});","map":{"version":3,"names":["getUserAgentPrefix","HttpRequest","checkFeatures","SPACE","UA_ESCAPE_CHAR","UA_NAME_ESCAPE_REGEX","UA_NAME_SEPARATOR","UA_VALUE_ESCAPE_REGEX","USER_AGENT","X_AMZ_USER_AGENT","encodeFeatures","userAgentMiddleware","options","next","context","args","_context$userAgent","_context$__smithy_con","_awsContext$__aws_sdk","_options$customUserAg","request","isInstance","headers","userAgent","map","escapeUserAgent","defaultUserAgent","defaultUserAgentProvider","awsContext","push","concat","Object","assign","__smithy_context","features","__aws_sdk_context","customUserAgent","appId","userAgentAppId","prefix","sdkUserAgentValue","join","normalUAValue","filter","section","startsWith","runtime","_objectSpread","userAgentPair","_userAgentPair$","name","split","part","replace","version","prefixSeparatorIndex","indexOf","substring","uaName","toLowerCase","item","length","reduce","acc","index","getUserAgentMiddlewareOptions","step","priority","tags","override","getUserAgentPlugin","config","applyToStack","clientStack","add"],"sources":["/Users/codinggents/Documents/lambdaforge/node_modules/@aws-sdk/middleware-user-agent/dist-es/user-agent-middleware.js"],"sourcesContent":["import { getUserAgentPrefix } from \"@aws-sdk/util-endpoints\";\nimport { HttpRequest } from \"@smithy/protocol-http\";\nimport { checkFeatures } from \"./check-features\";\nimport { SPACE, UA_ESCAPE_CHAR, UA_NAME_ESCAPE_REGEX, UA_NAME_SEPARATOR, UA_VALUE_ESCAPE_REGEX, USER_AGENT, X_AMZ_USER_AGENT, } from \"./constants\";\nimport { encodeFeatures } from \"./encode-features\";\nexport const userAgentMiddleware = (options) => (next, context) => async (args) => {\n    const { request } = args;\n    if (!HttpRequest.isInstance(request)) {\n        return next(args);\n    }\n    const { headers } = request;\n    const userAgent = context?.userAgent?.map(escapeUserAgent) || [];\n    const defaultUserAgent = (await options.defaultUserAgentProvider()).map(escapeUserAgent);\n    await checkFeatures(context, options, args);\n    const awsContext = context;\n    defaultUserAgent.push(`m/${encodeFeatures(Object.assign({}, context.__smithy_context?.features, awsContext.__aws_sdk_context?.features))}`);\n    const customUserAgent = options?.customUserAgent?.map(escapeUserAgent) || [];\n    const appId = await options.userAgentAppId();\n    if (appId) {\n        defaultUserAgent.push(escapeUserAgent([`app/${appId}`]));\n    }\n    const prefix = getUserAgentPrefix();\n    const sdkUserAgentValue = (prefix ? [prefix] : [])\n        .concat([...defaultUserAgent, ...userAgent, ...customUserAgent])\n        .join(SPACE);\n    const normalUAValue = [\n        ...defaultUserAgent.filter((section) => section.startsWith(\"aws-sdk-\")),\n        ...customUserAgent,\n    ].join(SPACE);\n    if (options.runtime !== \"browser\") {\n        if (normalUAValue) {\n            headers[X_AMZ_USER_AGENT] = headers[X_AMZ_USER_AGENT]\n                ? `${headers[USER_AGENT]} ${normalUAValue}`\n                : normalUAValue;\n        }\n        headers[USER_AGENT] = sdkUserAgentValue;\n    }\n    else {\n        headers[X_AMZ_USER_AGENT] = sdkUserAgentValue;\n    }\n    return next({\n        ...args,\n        request,\n    });\n};\nconst escapeUserAgent = (userAgentPair) => {\n    const name = userAgentPair[0]\n        .split(UA_NAME_SEPARATOR)\n        .map((part) => part.replace(UA_NAME_ESCAPE_REGEX, UA_ESCAPE_CHAR))\n        .join(UA_NAME_SEPARATOR);\n    const version = userAgentPair[1]?.replace(UA_VALUE_ESCAPE_REGEX, UA_ESCAPE_CHAR);\n    const prefixSeparatorIndex = name.indexOf(UA_NAME_SEPARATOR);\n    const prefix = name.substring(0, prefixSeparatorIndex);\n    let uaName = name.substring(prefixSeparatorIndex + 1);\n    if (prefix === \"api\") {\n        uaName = uaName.toLowerCase();\n    }\n    return [prefix, uaName, version]\n        .filter((item) => item && item.length > 0)\n        .reduce((acc, item, index) => {\n        switch (index) {\n            case 0:\n                return item;\n            case 1:\n                return `${acc}/${item}`;\n            default:\n                return `${acc}#${item}`;\n        }\n    }, \"\");\n};\nexport const getUserAgentMiddlewareOptions = {\n    name: \"getUserAgentMiddleware\",\n    step: \"build\",\n    priority: \"low\",\n    tags: [\"SET_USER_AGENT\", \"USER_AGENT\"],\n    override: true,\n};\nexport const getUserAgentPlugin = (config) => ({\n    applyToStack: (clientStack) => {\n        clientStack.add(userAgentMiddleware(config), getUserAgentMiddlewareOptions);\n    },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
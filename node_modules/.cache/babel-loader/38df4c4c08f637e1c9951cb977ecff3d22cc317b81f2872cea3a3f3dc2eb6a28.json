{"ast":null,"code":"import { NormalizedSchema } from \"@smithy/core/schema\";\nexport const copyDocumentWithTransform = function (source, schemaRef) {\n  let transform = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _ => _;\n  const ns = NormalizedSchema.of(schemaRef);\n  switch (typeof source) {\n    case \"undefined\":\n    case \"boolean\":\n    case \"number\":\n    case \"string\":\n    case \"bigint\":\n    case \"symbol\":\n      return transform(source, ns);\n    case \"function\":\n    case \"object\":\n      if (source === null) {\n        return transform(null, ns);\n      }\n      if (Array.isArray(source)) {\n        const newArray = new Array(source.length);\n        let i = 0;\n        for (const item of source) {\n          newArray[i++] = copyDocumentWithTransform(item, ns.getValueSchema(), transform);\n        }\n        return transform(newArray, ns);\n      }\n      if (\"byteLength\" in source) {\n        const newBytes = new Uint8Array(source.byteLength);\n        newBytes.set(source, 0);\n        return transform(newBytes, ns);\n      }\n      if (source instanceof Date) {\n        return transform(source, ns);\n      }\n      const newObject = {};\n      if (ns.isMapSchema()) {\n        for (const key of Object.keys(source)) {\n          newObject[key] = copyDocumentWithTransform(source[key], ns.getValueSchema(), transform);\n        }\n      } else if (ns.isStructSchema()) {\n        for (const [key, memberSchema] of ns.structIterator()) {\n          newObject[key] = copyDocumentWithTransform(source[key], memberSchema, transform);\n        }\n      } else if (ns.isDocumentSchema()) {\n        for (const key of Object.keys(source)) {\n          newObject[key] = copyDocumentWithTransform(source[key], ns.getValueSchema(), transform);\n        }\n      }\n      return transform(newObject, ns);\n    default:\n      return transform(source, ns);\n  }\n};","map":{"version":3,"names":["NormalizedSchema","copyDocumentWithTransform","source","schemaRef","transform","arguments","length","undefined","_","ns","of","Array","isArray","newArray","i","item","getValueSchema","newBytes","Uint8Array","byteLength","set","Date","newObject","isMapSchema","key","Object","keys","isStructSchema","memberSchema","structIterator","isDocumentSchema"],"sources":["/Users/codinggents/Documents/lambdaforge/node_modules/@smithy/core/dist-es/submodules/serde/copyDocumentWithTransform.js"],"sourcesContent":["import { NormalizedSchema } from \"@smithy/core/schema\";\nexport const copyDocumentWithTransform = (source, schemaRef, transform = (_) => _) => {\n    const ns = NormalizedSchema.of(schemaRef);\n    switch (typeof source) {\n        case \"undefined\":\n        case \"boolean\":\n        case \"number\":\n        case \"string\":\n        case \"bigint\":\n        case \"symbol\":\n            return transform(source, ns);\n        case \"function\":\n        case \"object\":\n            if (source === null) {\n                return transform(null, ns);\n            }\n            if (Array.isArray(source)) {\n                const newArray = new Array(source.length);\n                let i = 0;\n                for (const item of source) {\n                    newArray[i++] = copyDocumentWithTransform(item, ns.getValueSchema(), transform);\n                }\n                return transform(newArray, ns);\n            }\n            if (\"byteLength\" in source) {\n                const newBytes = new Uint8Array(source.byteLength);\n                newBytes.set(source, 0);\n                return transform(newBytes, ns);\n            }\n            if (source instanceof Date) {\n                return transform(source, ns);\n            }\n            const newObject = {};\n            if (ns.isMapSchema()) {\n                for (const key of Object.keys(source)) {\n                    newObject[key] = copyDocumentWithTransform(source[key], ns.getValueSchema(), transform);\n                }\n            }\n            else if (ns.isStructSchema()) {\n                for (const [key, memberSchema] of ns.structIterator()) {\n                    newObject[key] = copyDocumentWithTransform(source[key], memberSchema, transform);\n                }\n            }\n            else if (ns.isDocumentSchema()) {\n                for (const key of Object.keys(source)) {\n                    newObject[key] = copyDocumentWithTransform(source[key], ns.getValueSchema(), transform);\n                }\n            }\n            return transform(newObject, ns);\n        default:\n            return transform(source, ns);\n    }\n};\n"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,qBAAqB;AACtD,OAAO,MAAMC,yBAAyB,GAAG,SAAAA,CAACC,MAAM,EAAEC,SAAS,EAA2B;EAAA,IAAzBC,SAAS,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAIG,CAAC,IAAKA,CAAC;EAC7E,MAAMC,EAAE,GAAGT,gBAAgB,CAACU,EAAE,CAACP,SAAS,CAAC;EACzC,QAAQ,OAAOD,MAAM;IACjB,KAAK,WAAW;IAChB,KAAK,SAAS;IACd,KAAK,QAAQ;IACb,KAAK,QAAQ;IACb,KAAK,QAAQ;IACb,KAAK,QAAQ;MACT,OAAOE,SAAS,CAACF,MAAM,EAAEO,EAAE,CAAC;IAChC,KAAK,UAAU;IACf,KAAK,QAAQ;MACT,IAAIP,MAAM,KAAK,IAAI,EAAE;QACjB,OAAOE,SAAS,CAAC,IAAI,EAAEK,EAAE,CAAC;MAC9B;MACA,IAAIE,KAAK,CAACC,OAAO,CAACV,MAAM,CAAC,EAAE;QACvB,MAAMW,QAAQ,GAAG,IAAIF,KAAK,CAACT,MAAM,CAACI,MAAM,CAAC;QACzC,IAAIQ,CAAC,GAAG,CAAC;QACT,KAAK,MAAMC,IAAI,IAAIb,MAAM,EAAE;UACvBW,QAAQ,CAACC,CAAC,EAAE,CAAC,GAAGb,yBAAyB,CAACc,IAAI,EAAEN,EAAE,CAACO,cAAc,CAAC,CAAC,EAAEZ,SAAS,CAAC;QACnF;QACA,OAAOA,SAAS,CAACS,QAAQ,EAAEJ,EAAE,CAAC;MAClC;MACA,IAAI,YAAY,IAAIP,MAAM,EAAE;QACxB,MAAMe,QAAQ,GAAG,IAAIC,UAAU,CAAChB,MAAM,CAACiB,UAAU,CAAC;QAClDF,QAAQ,CAACG,GAAG,CAAClB,MAAM,EAAE,CAAC,CAAC;QACvB,OAAOE,SAAS,CAACa,QAAQ,EAAER,EAAE,CAAC;MAClC;MACA,IAAIP,MAAM,YAAYmB,IAAI,EAAE;QACxB,OAAOjB,SAAS,CAACF,MAAM,EAAEO,EAAE,CAAC;MAChC;MACA,MAAMa,SAAS,GAAG,CAAC,CAAC;MACpB,IAAIb,EAAE,CAACc,WAAW,CAAC,CAAC,EAAE;QAClB,KAAK,MAAMC,GAAG,IAAIC,MAAM,CAACC,IAAI,CAACxB,MAAM,CAAC,EAAE;UACnCoB,SAAS,CAACE,GAAG,CAAC,GAAGvB,yBAAyB,CAACC,MAAM,CAACsB,GAAG,CAAC,EAAEf,EAAE,CAACO,cAAc,CAAC,CAAC,EAAEZ,SAAS,CAAC;QAC3F;MACJ,CAAC,MACI,IAAIK,EAAE,CAACkB,cAAc,CAAC,CAAC,EAAE;QAC1B,KAAK,MAAM,CAACH,GAAG,EAAEI,YAAY,CAAC,IAAInB,EAAE,CAACoB,cAAc,CAAC,CAAC,EAAE;UACnDP,SAAS,CAACE,GAAG,CAAC,GAAGvB,yBAAyB,CAACC,MAAM,CAACsB,GAAG,CAAC,EAAEI,YAAY,EAAExB,SAAS,CAAC;QACpF;MACJ,CAAC,MACI,IAAIK,EAAE,CAACqB,gBAAgB,CAAC,CAAC,EAAE;QAC5B,KAAK,MAAMN,GAAG,IAAIC,MAAM,CAACC,IAAI,CAACxB,MAAM,CAAC,EAAE;UACnCoB,SAAS,CAACE,GAAG,CAAC,GAAGvB,yBAAyB,CAACC,MAAM,CAACsB,GAAG,CAAC,EAAEf,EAAE,CAACO,cAAc,CAAC,CAAC,EAAEZ,SAAS,CAAC;QAC3F;MACJ;MACA,OAAOA,SAAS,CAACkB,SAAS,EAAEb,EAAE,CAAC;IACnC;MACI,OAAOL,SAAS,CAACF,MAAM,EAAEO,EAAE,CAAC;EACpC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
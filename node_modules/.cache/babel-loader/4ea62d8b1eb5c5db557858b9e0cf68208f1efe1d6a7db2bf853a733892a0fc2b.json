{"ast":null,"code":"import { NormalizedSchema } from \"@smithy/core/schema\";\nimport { ToStringShapeSerializer } from \"./ToStringShapeSerializer\";\nexport class HttpInterceptingShapeSerializer {\n  constructor(codecSerializer, codecSettings) {\n    let stringSerializer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new ToStringShapeSerializer(codecSettings);\n    this.codecSerializer = codecSerializer;\n    this.stringSerializer = stringSerializer;\n  }\n  setSerdeContext(serdeContext) {\n    this.codecSerializer.setSerdeContext(serdeContext);\n    this.stringSerializer.setSerdeContext(serdeContext);\n  }\n  write(schema, value) {\n    const ns = NormalizedSchema.of(schema);\n    const traits = ns.getMergedTraits();\n    if (traits.httpHeader || traits.httpLabel || traits.httpQuery) {\n      this.stringSerializer.write(ns, value);\n      this.buffer = this.stringSerializer.flush();\n      return;\n    }\n    return this.codecSerializer.write(ns, value);\n  }\n  flush() {\n    if (this.buffer !== undefined) {\n      const buffer = this.buffer;\n      this.buffer = undefined;\n      return buffer;\n    }\n    return this.codecSerializer.flush();\n  }\n}","map":{"version":3,"names":["NormalizedSchema","ToStringShapeSerializer","HttpInterceptingShapeSerializer","constructor","codecSerializer","codecSettings","stringSerializer","arguments","length","undefined","setSerdeContext","serdeContext","write","schema","value","ns","of","traits","getMergedTraits","httpHeader","httpLabel","httpQuery","buffer","flush"],"sources":["/Users/codinggents/Documents/lambdaforge/node_modules/@smithy/core/dist-es/submodules/protocols/serde/HttpInterceptingShapeSerializer.js"],"sourcesContent":["import { NormalizedSchema } from \"@smithy/core/schema\";\nimport { ToStringShapeSerializer } from \"./ToStringShapeSerializer\";\nexport class HttpInterceptingShapeSerializer {\n    constructor(codecSerializer, codecSettings, stringSerializer = new ToStringShapeSerializer(codecSettings)) {\n        this.codecSerializer = codecSerializer;\n        this.stringSerializer = stringSerializer;\n    }\n    setSerdeContext(serdeContext) {\n        this.codecSerializer.setSerdeContext(serdeContext);\n        this.stringSerializer.setSerdeContext(serdeContext);\n    }\n    write(schema, value) {\n        const ns = NormalizedSchema.of(schema);\n        const traits = ns.getMergedTraits();\n        if (traits.httpHeader || traits.httpLabel || traits.httpQuery) {\n            this.stringSerializer.write(ns, value);\n            this.buffer = this.stringSerializer.flush();\n            return;\n        }\n        return this.codecSerializer.write(ns, value);\n    }\n    flush() {\n        if (this.buffer !== undefined) {\n            const buffer = this.buffer;\n            this.buffer = undefined;\n            return buffer;\n        }\n        return this.codecSerializer.flush();\n    }\n}\n"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,qBAAqB;AACtD,SAASC,uBAAuB,QAAQ,2BAA2B;AACnE,OAAO,MAAMC,+BAA+B,CAAC;EACzCC,WAAWA,CAACC,eAAe,EAAEC,aAAa,EAAiE;IAAA,IAA/DC,gBAAgB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAIN,uBAAuB,CAACI,aAAa,CAAC;IACrG,IAAI,CAACD,eAAe,GAAGA,eAAe;IACtC,IAAI,CAACE,gBAAgB,GAAGA,gBAAgB;EAC5C;EACAI,eAAeA,CAACC,YAAY,EAAE;IAC1B,IAAI,CAACP,eAAe,CAACM,eAAe,CAACC,YAAY,CAAC;IAClD,IAAI,CAACL,gBAAgB,CAACI,eAAe,CAACC,YAAY,CAAC;EACvD;EACAC,KAAKA,CAACC,MAAM,EAAEC,KAAK,EAAE;IACjB,MAAMC,EAAE,GAAGf,gBAAgB,CAACgB,EAAE,CAACH,MAAM,CAAC;IACtC,MAAMI,MAAM,GAAGF,EAAE,CAACG,eAAe,CAAC,CAAC;IACnC,IAAID,MAAM,CAACE,UAAU,IAAIF,MAAM,CAACG,SAAS,IAAIH,MAAM,CAACI,SAAS,EAAE;MAC3D,IAAI,CAACf,gBAAgB,CAACM,KAAK,CAACG,EAAE,EAAED,KAAK,CAAC;MACtC,IAAI,CAACQ,MAAM,GAAG,IAAI,CAAChB,gBAAgB,CAACiB,KAAK,CAAC,CAAC;MAC3C;IACJ;IACA,OAAO,IAAI,CAACnB,eAAe,CAACQ,KAAK,CAACG,EAAE,EAAED,KAAK,CAAC;EAChD;EACAS,KAAKA,CAAA,EAAG;IACJ,IAAI,IAAI,CAACD,MAAM,KAAKb,SAAS,EAAE;MAC3B,MAAMa,MAAM,GAAG,IAAI,CAACA,MAAM;MAC1B,IAAI,CAACA,MAAM,GAAGb,SAAS;MACvB,OAAOa,MAAM;IACjB;IACA,OAAO,IAAI,CAAClB,eAAe,CAACmB,KAAK,CAAC,CAAC;EACvC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { BedrockRuntimeClient, InvokeModelCommand } from '@aws-sdk/client-bedrock-runtime';\nimport { awsConfig, validateAWSConfig } from '../config/aws-config';\n\n// AWS Bedrock configuration\nconst bedrock = new BedrockRuntimeClient({\n  region: awsConfig.bedrock.region,\n  credentials: {\n    accessKeyId: awsConfig.credentials.accessKeyId,\n    secretAccessKey: awsConfig.credentials.secretAccessKey\n  }\n});\nclass AIService {\n  constructor() {\n    this.modelId = awsConfig.bedrock.modelId;\n    this.maxTokens = awsConfig.bedrock.maxTokens;\n    this.temperature = awsConfig.bedrock.temperature;\n    this.topP = awsConfig.bedrock.topP;\n\n    // Validate configuration on initialization\n    this.configValidation = validateAWSConfig();\n  }\n  async generateArchitectureRecommendations(formData) {\n    try {\n      // Check if AI features are enabled and configured\n      if (!awsConfig.features.enableAISuggestions) {\n        console.log('AI suggestions disabled, using fallback mode');\n        return this.getFallbackRecommendations(formData);\n      }\n\n      // Validate AWS configuration\n      if (!this.configValidation.isValid) {\n        console.warn('AWS configuration invalid:', this.configValidation.errors);\n        if (awsConfig.features.enableFallbackMode) {\n          return this.getFallbackRecommendations(formData);\n        }\n        throw new Error('AWS configuration invalid: ' + this.configValidation.errors.join(', '));\n      }\n      const prompt = this.buildArchitecturePrompt(formData);\n      const command = new InvokeModelCommand({\n        modelId: this.modelId,\n        contentType: 'application/json',\n        accept: 'application/json',\n        body: JSON.stringify({\n          anthropic_version: 'bedrock-2023-05-31',\n          max_tokens: this.maxTokens,\n          messages: [{\n            role: 'user',\n            content: prompt\n          }],\n          temperature: this.temperature,\n          top_p: this.topP\n        })\n      });\n      if (awsConfig.features.debugMode) {\n        console.log('Bedrock API call:', command);\n      }\n      const response = await bedrock.send(command);\n      const responseBody = JSON.parse(new TextDecoder().decode(response.body));\n      if (awsConfig.features.debugMode) {\n        console.log('Bedrock response:', responseBody);\n      }\n      return this.parseAIResponse(responseBody.content[0].text, formData);\n    } catch (error) {\n      console.error('AI Service Error:', error);\n\n      // Provide more specific error handling\n      if (error.code === 'AccessDenied') {\n        throw new Error('AWS access denied. Please check your credentials and IAM permissions for Bedrock.');\n      } else if (error.code === 'ModelNotFound') {\n        throw new Error('Claude 3 model not available in this region. Please check your AWS region.');\n      } else if (error.code === 'ThrottlingException') {\n        throw new Error('AWS Bedrock rate limit exceeded. Please try again later.');\n      }\n\n      // Fallback to rule-based recommendations if AI fails\n      if (awsConfig.features.enableFallbackMode) {\n        return this.getFallbackRecommendations(formData);\n      }\n      throw error;\n    }\n  }\n  buildArchitecturePrompt(formData) {\n    const currentServices = {\n      infrastructure: formData.selectedInfrastructure || [],\n      compute: formData.selectedCompute || [],\n      integration: formData.selectedIntegration || [],\n      security: formData.selectedSecurity || [],\n      monitoring: formData.selectedMonitoring || [],\n      deployment: formData.selectedDeployment || [],\n      optimization: formData.selectedOptimization || []\n    };\n    return `You are an AWS Solutions Architect AI assistant. Analyze the following infrastructure configuration and provide specific, actionable recommendations.\n\nPROJECT DETAILS:\n- Project Name: ${formData.projectName || 'Not specified'}\n- Environment: ${formData.environment || 'Development'}\n- AWS Region: ${formData.awsRegion || 'us-east-1'}\n- VPC CIDR: ${formData.vpcCidrBlock || 'Not specified'}\n\nCURRENT SERVICES SELECTED:\n- Infrastructure: ${currentServices.infrastructure.join(', ') || 'None'}\n- Compute: ${currentServices.compute.join(', ') || 'None'}\n- Integration: ${currentServices.integration.join(', ') || 'None'}\n- Security: ${currentServices.security.join(', ') || 'None'}\n- Monitoring: ${currentServices.monitoring.join(', ') || 'None'}\n- Deployment: ${currentServices.deployment.join(', ') || 'None'}\n- Optimization: ${currentServices.optimization.join(', ') || 'None'}\n\nPlease provide 3-5 specific recommendations in the following JSON format:\n{\n  \"recommendations\": [\n    {\n      \"id\": \"unique-id\",\n      \"type\": \"security|cost|performance|architecture|monitoring\",\n      \"title\": \"Recommendation Title\",\n      \"description\": \"Brief description of the recommendation\",\n      \"impact\": \"Critical|High|Medium|Low\",\n      \"confidence\": 85,\n      \"savings\": \"$X/month or Risk Reduction or Operational Efficiency\",\n      \"reasoning\": \"Why this recommendation is important\",\n      \"recommendations\": [\"Step 1\", \"Step 2\", \"Step 3\"],\n      \"applyData\": {\n        \"selectedSecurity\": [\"service-to-add\"],\n        \"selectedMonitoring\": [\"service-to-add\"]\n      }\n    }\n  ]\n}\n\nFocus on:\n1. Security best practices and compliance\n2. Cost optimization opportunities\n3. Performance improvements\n4. Serverless-first architecture when appropriate\n5. Monitoring and observability gaps\n6. AWS Well-Architected Framework principles\n\nProvide only the JSON response, no additional text.`;\n  }\n  parseAIResponse(aiResponse, formData) {\n    try {\n      const parsed = JSON.parse(aiResponse);\n      return parsed.recommendations.map(rec => ({\n        ...rec,\n        icon: this.getIconForType(rec.type),\n        // Ensure applyData maintains existing selections\n        applyData: this.mergeApplyData(rec.applyData, formData)\n      }));\n    } catch (error) {\n      console.error('Failed to parse AI response:', error);\n      return this.getFallbackRecommendations(formData);\n    }\n  }\n  mergeApplyData(newData, formData) {\n    const merged = {};\n    Object.keys(newData).forEach(key => {\n      if (Array.isArray(newData[key])) {\n        // Merge arrays, avoiding duplicates\n        const existing = formData[key] || [];\n        merged[key] = [...new Set([...existing, ...newData[key]])];\n      } else {\n        merged[key] = newData[key];\n      }\n    });\n    return merged;\n  }\n  getIconForType(type) {\n    // Return icon components based on type\n    const iconMap = {\n      security: '🛡️',\n      cost: '💰',\n      performance: '⚡',\n      architecture: '🏗️',\n      monitoring: '📊'\n    };\n    return iconMap[type] || '💡';\n  }\n  getFallbackRecommendations(formData) {\n    var _formData$selectedSec, _formData$selectedCom, _formData$selectedOpt;\n    // Fallback rule-based recommendations if AI fails\n    const recommendations = [];\n\n    // Security recommendations\n    if (!((_formData$selectedSec = formData.selectedSecurity) !== null && _formData$selectedSec !== void 0 && _formData$selectedSec.includes('waf-protection'))) {\n      recommendations.push({\n        id: 'security-waf',\n        type: 'security',\n        title: 'Enable AWS WAF Protection',\n        description: 'Add Web Application Firewall for enhanced security',\n        impact: 'High',\n        confidence: 95,\n        savings: 'Risk Reduction',\n        reasoning: 'WAF protects against common web exploits and attacks',\n        recommendations: ['Enable AWS WAF', 'Configure rate limiting', 'Set up geo-blocking'],\n        icon: '🛡️',\n        applyData: {\n          selectedSecurity: [...(formData.selectedSecurity || []), 'waf-protection']\n        }\n      });\n    }\n\n    // Cost optimization\n    if ((_formData$selectedCom = formData.selectedCompute) !== null && _formData$selectedCom !== void 0 && _formData$selectedCom.includes('ec2-instances') && !((_formData$selectedOpt = formData.selectedOptimization) !== null && _formData$selectedOpt !== void 0 && _formData$selectedOpt.includes('auto-scaling'))) {\n      recommendations.push({\n        id: 'cost-autoscaling',\n        type: 'cost',\n        title: 'Implement Auto Scaling',\n        description: 'Reduce costs with automatic scaling based on demand',\n        impact: 'Medium',\n        confidence: 88,\n        savings: '$120/month',\n        reasoning: 'Auto scaling optimizes resource usage and reduces costs',\n        recommendations: ['Configure Auto Scaling Groups', 'Set up CloudWatch alarms', 'Define scaling policies'],\n        icon: '💰',\n        applyData: {\n          selectedOptimization: [...(formData.selectedOptimization || []), 'auto-scaling']\n        }\n      });\n    }\n    return recommendations;\n  }\n  async validateRecommendation(recommendation, currentFormData) {\n    // Validate that the recommendation doesn't conflict with current setup\n    const conflicts = [];\n    if (recommendation.applyData) {\n      Object.keys(recommendation.applyData).forEach(key => {\n        const newServices = recommendation.applyData[key];\n        const currentServices = currentFormData[key] || [];\n\n        // Check for any logical conflicts\n        if (key === 'selectedCompute') {\n          if (newServices.includes('lambda-functions') && currentServices.includes('ec2-instances')) {\n            conflicts.push('Mixing Lambda and EC2 may require additional configuration');\n          }\n        }\n      });\n    }\n    return {\n      isValid: conflicts.length === 0,\n      conflicts,\n      recommendation\n    };\n  }\n  async estimateCostImpact(recommendation, currentFormData) {\n    // Estimate the cost impact of applying this recommendation\n    const costMap = {\n      'waf-protection': 35,\n      'auto-scaling': -120,\n      // Negative means savings\n      'lambda-functions': -50,\n      'cloudfront-cdn': 25,\n      'x-ray-tracing': 22\n    };\n    let totalImpact = 0;\n    if (recommendation.applyData) {\n      Object.values(recommendation.applyData).flat().forEach(service => {\n        if (costMap[service]) {\n          totalImpact += costMap[service];\n        }\n      });\n    }\n    return {\n      monthlyImpact: totalImpact,\n      yearlyImpact: totalImpact * 12,\n      description: totalImpact < 0 ? `Saves $${Math.abs(totalImpact)}/month` : `Adds $${totalImpact}/month`\n    };\n  }\n}\nconst aiServiceInstance = new AIService();\nexport default aiServiceInstance;","map":{"version":3,"names":["BedrockRuntimeClient","InvokeModelCommand","awsConfig","validateAWSConfig","bedrock","region","credentials","accessKeyId","secretAccessKey","AIService","constructor","modelId","maxTokens","temperature","topP","configValidation","generateArchitectureRecommendations","formData","features","enableAISuggestions","console","log","getFallbackRecommendations","isValid","warn","errors","enableFallbackMode","Error","join","prompt","buildArchitecturePrompt","command","contentType","accept","body","JSON","stringify","anthropic_version","max_tokens","messages","role","content","top_p","debugMode","response","send","responseBody","parse","TextDecoder","decode","parseAIResponse","text","error","code","currentServices","infrastructure","selectedInfrastructure","compute","selectedCompute","integration","selectedIntegration","security","selectedSecurity","monitoring","selectedMonitoring","deployment","selectedDeployment","optimization","selectedOptimization","projectName","environment","awsRegion","vpcCidrBlock","aiResponse","parsed","recommendations","map","rec","icon","getIconForType","type","applyData","mergeApplyData","newData","merged","Object","keys","forEach","key","Array","isArray","existing","Set","iconMap","cost","performance","architecture","_formData$selectedSec","_formData$selectedCom","_formData$selectedOpt","includes","push","id","title","description","impact","confidence","savings","reasoning","validateRecommendation","recommendation","currentFormData","conflicts","newServices","length","estimateCostImpact","costMap","totalImpact","values","flat","service","monthlyImpact","yearlyImpact","Math","abs","aiServiceInstance"],"sources":["/Users/codinggents/Documents/lambdaforge/src/services/aiService.js"],"sourcesContent":["import { BedrockRuntimeClient, InvokeModelCommand } from '@aws-sdk/client-bedrock-runtime';\nimport { awsConfig, validateAWSConfig } from '../config/aws-config';\n\n// AWS Bedrock configuration\nconst bedrock = new BedrockRuntimeClient({\n  region: awsConfig.bedrock.region,\n  credentials: {\n    accessKeyId: awsConfig.credentials.accessKeyId,\n    secretAccessKey: awsConfig.credentials.secretAccessKey\n  }\n});\n\nclass AIService {\n  constructor() {\n    this.modelId = awsConfig.bedrock.modelId;\n    this.maxTokens = awsConfig.bedrock.maxTokens;\n    this.temperature = awsConfig.bedrock.temperature;\n    this.topP = awsConfig.bedrock.topP;\n    \n    // Validate configuration on initialization\n    this.configValidation = validateAWSConfig();\n  }\n\n  async generateArchitectureRecommendations(formData) {\n    try {\n      // Check if AI features are enabled and configured\n      if (!awsConfig.features.enableAISuggestions) {\n        console.log('AI suggestions disabled, using fallback mode');\n        return this.getFallbackRecommendations(formData);\n      }\n\n      // Validate AWS configuration\n      if (!this.configValidation.isValid) {\n        console.warn('AWS configuration invalid:', this.configValidation.errors);\n        if (awsConfig.features.enableFallbackMode) {\n          return this.getFallbackRecommendations(formData);\n        }\n        throw new Error('AWS configuration invalid: ' + this.configValidation.errors.join(', '));\n      }\n\n      const prompt = this.buildArchitecturePrompt(formData);\n      \n      const command = new InvokeModelCommand({\n        modelId: this.modelId,\n        contentType: 'application/json',\n        accept: 'application/json',\n        body: JSON.stringify({\n          anthropic_version: 'bedrock-2023-05-31',\n          max_tokens: this.maxTokens,\n          messages: [\n            {\n              role: 'user',\n              content: prompt\n            }\n          ],\n          temperature: this.temperature,\n          top_p: this.topP\n        })\n      });\n\n      if (awsConfig.features.debugMode) {\n        console.log('Bedrock API call:', command);\n      }\n\n      const response = await bedrock.send(command);\n      const responseBody = JSON.parse(new TextDecoder().decode(response.body));\n      \n      if (awsConfig.features.debugMode) {\n        console.log('Bedrock response:', responseBody);\n      }\n      \n      return this.parseAIResponse(responseBody.content[0].text, formData);\n    } catch (error) {\n      console.error('AI Service Error:', error);\n      \n      // Provide more specific error handling\n      if (error.code === 'AccessDenied') {\n        throw new Error('AWS access denied. Please check your credentials and IAM permissions for Bedrock.');\n      } else if (error.code === 'ModelNotFound') {\n        throw new Error('Claude 3 model not available in this region. Please check your AWS region.');\n      } else if (error.code === 'ThrottlingException') {\n        throw new Error('AWS Bedrock rate limit exceeded. Please try again later.');\n      }\n      \n      // Fallback to rule-based recommendations if AI fails\n      if (awsConfig.features.enableFallbackMode) {\n        return this.getFallbackRecommendations(formData);\n      }\n      \n      throw error;\n    }\n  }\n\n  buildArchitecturePrompt(formData) {\n    const currentServices = {\n      infrastructure: formData.selectedInfrastructure || [],\n      compute: formData.selectedCompute || [],\n      integration: formData.selectedIntegration || [],\n      security: formData.selectedSecurity || [],\n      monitoring: formData.selectedMonitoring || [],\n      deployment: formData.selectedDeployment || [],\n      optimization: formData.selectedOptimization || []\n    };\n\n    return `You are an AWS Solutions Architect AI assistant. Analyze the following infrastructure configuration and provide specific, actionable recommendations.\n\nPROJECT DETAILS:\n- Project Name: ${formData.projectName || 'Not specified'}\n- Environment: ${formData.environment || 'Development'}\n- AWS Region: ${formData.awsRegion || 'us-east-1'}\n- VPC CIDR: ${formData.vpcCidrBlock || 'Not specified'}\n\nCURRENT SERVICES SELECTED:\n- Infrastructure: ${currentServices.infrastructure.join(', ') || 'None'}\n- Compute: ${currentServices.compute.join(', ') || 'None'}\n- Integration: ${currentServices.integration.join(', ') || 'None'}\n- Security: ${currentServices.security.join(', ') || 'None'}\n- Monitoring: ${currentServices.monitoring.join(', ') || 'None'}\n- Deployment: ${currentServices.deployment.join(', ') || 'None'}\n- Optimization: ${currentServices.optimization.join(', ') || 'None'}\n\nPlease provide 3-5 specific recommendations in the following JSON format:\n{\n  \"recommendations\": [\n    {\n      \"id\": \"unique-id\",\n      \"type\": \"security|cost|performance|architecture|monitoring\",\n      \"title\": \"Recommendation Title\",\n      \"description\": \"Brief description of the recommendation\",\n      \"impact\": \"Critical|High|Medium|Low\",\n      \"confidence\": 85,\n      \"savings\": \"$X/month or Risk Reduction or Operational Efficiency\",\n      \"reasoning\": \"Why this recommendation is important\",\n      \"recommendations\": [\"Step 1\", \"Step 2\", \"Step 3\"],\n      \"applyData\": {\n        \"selectedSecurity\": [\"service-to-add\"],\n        \"selectedMonitoring\": [\"service-to-add\"]\n      }\n    }\n  ]\n}\n\nFocus on:\n1. Security best practices and compliance\n2. Cost optimization opportunities\n3. Performance improvements\n4. Serverless-first architecture when appropriate\n5. Monitoring and observability gaps\n6. AWS Well-Architected Framework principles\n\nProvide only the JSON response, no additional text.`;\n  }\n\n  parseAIResponse(aiResponse, formData) {\n    try {\n      const parsed = JSON.parse(aiResponse);\n      return parsed.recommendations.map(rec => ({\n        ...rec,\n        icon: this.getIconForType(rec.type),\n        // Ensure applyData maintains existing selections\n        applyData: this.mergeApplyData(rec.applyData, formData)\n      }));\n    } catch (error) {\n      console.error('Failed to parse AI response:', error);\n      return this.getFallbackRecommendations(formData);\n    }\n  }\n\n  mergeApplyData(newData, formData) {\n    const merged = {};\n    \n    Object.keys(newData).forEach(key => {\n      if (Array.isArray(newData[key])) {\n        // Merge arrays, avoiding duplicates\n        const existing = formData[key] || [];\n        merged[key] = [...new Set([...existing, ...newData[key]])];\n      } else {\n        merged[key] = newData[key];\n      }\n    });\n    \n    return merged;\n  }\n\n  getIconForType(type) {\n    // Return icon components based on type\n    const iconMap = {\n      security: '🛡️',\n      cost: '💰',\n      performance: '⚡',\n      architecture: '🏗️',\n      monitoring: '📊'\n    };\n    return iconMap[type] || '💡';\n  }\n\n  getFallbackRecommendations(formData) {\n    // Fallback rule-based recommendations if AI fails\n    const recommendations = [];\n\n    // Security recommendations\n    if (!formData.selectedSecurity?.includes('waf-protection')) {\n      recommendations.push({\n        id: 'security-waf',\n        type: 'security',\n        title: 'Enable AWS WAF Protection',\n        description: 'Add Web Application Firewall for enhanced security',\n        impact: 'High',\n        confidence: 95,\n        savings: 'Risk Reduction',\n        reasoning: 'WAF protects against common web exploits and attacks',\n        recommendations: ['Enable AWS WAF', 'Configure rate limiting', 'Set up geo-blocking'],\n        icon: '🛡️',\n        applyData: {\n          selectedSecurity: [...(formData.selectedSecurity || []), 'waf-protection']\n        }\n      });\n    }\n\n    // Cost optimization\n    if (formData.selectedCompute?.includes('ec2-instances') && \n        !formData.selectedOptimization?.includes('auto-scaling')) {\n      recommendations.push({\n        id: 'cost-autoscaling',\n        type: 'cost',\n        title: 'Implement Auto Scaling',\n        description: 'Reduce costs with automatic scaling based on demand',\n        impact: 'Medium',\n        confidence: 88,\n        savings: '$120/month',\n        reasoning: 'Auto scaling optimizes resource usage and reduces costs',\n        recommendations: ['Configure Auto Scaling Groups', 'Set up CloudWatch alarms', 'Define scaling policies'],\n        icon: '💰',\n        applyData: {\n          selectedOptimization: [...(formData.selectedOptimization || []), 'auto-scaling']\n        }\n      });\n    }\n\n    return recommendations;\n  }\n\n  async validateRecommendation(recommendation, currentFormData) {\n    // Validate that the recommendation doesn't conflict with current setup\n    const conflicts = [];\n    \n    if (recommendation.applyData) {\n      Object.keys(recommendation.applyData).forEach(key => {\n        const newServices = recommendation.applyData[key];\n        const currentServices = currentFormData[key] || [];\n        \n        // Check for any logical conflicts\n        if (key === 'selectedCompute') {\n          if (newServices.includes('lambda-functions') && currentServices.includes('ec2-instances')) {\n            conflicts.push('Mixing Lambda and EC2 may require additional configuration');\n          }\n        }\n      });\n    }\n    \n    return {\n      isValid: conflicts.length === 0,\n      conflicts,\n      recommendation\n    };\n  }\n\n  async estimateCostImpact(recommendation, currentFormData) {\n    // Estimate the cost impact of applying this recommendation\n    const costMap = {\n      'waf-protection': 35,\n      'auto-scaling': -120, // Negative means savings\n      'lambda-functions': -50,\n      'cloudfront-cdn': 25,\n      'x-ray-tracing': 22\n    };\n\n    let totalImpact = 0;\n    \n    if (recommendation.applyData) {\n      Object.values(recommendation.applyData).flat().forEach(service => {\n        if (costMap[service]) {\n          totalImpact += costMap[service];\n        }\n      });\n    }\n\n    return {\n      monthlyImpact: totalImpact,\n      yearlyImpact: totalImpact * 12,\n      description: totalImpact < 0 ? `Saves $${Math.abs(totalImpact)}/month` : `Adds $${totalImpact}/month`\n    };\n  }\n}\n\nconst aiServiceInstance = new AIService();\nexport default aiServiceInstance; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}